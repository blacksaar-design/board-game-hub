<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vogelfotografie - Online Brettspiel</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;800&family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
</head>

<body>
    <div class="status-indicator">
        <div class="status-dot" id="statusDot"></div>
        <span id="statusText">Initialisiere P2P-Netzwerk...</span>
    </div>

    <!-- Lobby Screen -->
    <div id="lobbyScreen" class="screen active">
        <div class="lobby-container">
            <div class="game-title">
                <h1>üê¶ Vogelfotografie</h1>
                <p class="subtitle">Digitales Vogelfotografie-Brettspiel (Hub Edition)</p>
            </div>

            <div class="lobby-content">
                <div class="lobby-card">
                    <h2>Neues Spiel erstellen</h2>
                    <input type="text" id="createPlayerName" placeholder="Dein Name" maxlength="20">
                    <button id="createRoomBtn" class="btn btn-primary">Raum erstellen</button>
                </div>

                <div class="divider">
                    <span>ODER</span>
                </div>

                <div class="lobby-card">
                    <h2>Spiel beitreten</h2>
                    <input type="text" id="joinRoomCode" placeholder="Raum-Code (z.B. VOGEL-1234)" maxlength="20">
                    <input type="text" id="joinPlayerName" placeholder="Dein Name" maxlength="20">
                    <button id="joinRoomBtn" class="btn btn-secondary">Beitreten</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Waiting Room Screen -->
    <div id="waitingScreen" class="screen">
        <div class="waiting-container">
            <div class="room-info">
                <h2>Raum-Code</h2>
                <div class="room-code" id="displayRoomCode" style="font-size: 2rem; letter-spacing: 2px;">------</div>
                <p class="room-hint">Teile diesen Code mit deinen Freunden!</p>
            </div>

            <div class="players-waiting">
                <h3>Spieler im Raum</h3>
                <div id="playersList" class="players-list"></div>
                <p class="player-count"><span id="playerCount">0</span> / 4 Spieler</p>
            </div>

            <button id="startGameBtn" class="btn btn-primary btn-large">Spiel starten</button>
            <button id="leaveLobbyBtn" class="btn btn-ghost">Raum verlassen</button>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen">
        <div class="game-container">
            <div class="game-header">
                <div class="room-code-small">Raum: <span id="gameRoomCode"></span></div>
                <div class="deck-info">
                    <div class="deck-counter">
                        <span class="deck-icon">üê¶</span>
                        <span id="birdDeckCount">0</span>
                    </div>
                    <div class="deck-counter">
                        <span class="deck-icon">ü¶ó</span>
                        <span id="insectDeckCount">0</span>
                    </div>
                </div>
            </div>

            <div class="players-panel">
                <div id="playersInfo" class="players-info"></div>
            </div>

            <div class="game-board">
                <div class="turn-indicator" id="turnIndicator">
                    <span id="currentPlayerName">Spieler 1</span> ist an der Reihe
                </div>

                <div class="birds-area">
                    <h3 class="area-title">V√∂gel in der N√§he</h3>
                    <div id="visibleBirds" class="bird-cards-container"></div>
                </div>

                <div class="action-area">
                    <div class="selected-bird-info" id="selectedBirdInfo">
                        <p>W√§hle einen Vogel zum Fotografieren aus</p>
                    </div>

                    <div class="distance-tracker" id="distanceTracker">
                        <div class="distance-step" data-distance="0">
                            <div class="distance-icon">üî≠</div>
                            <div class="distance-label">Fern</div>
                        </div>
                        <div class="distance-step" data-distance="1">
                            <div class="distance-icon">üëÄ</div>
                            <div class="distance-label">Mittel</div>
                        </div>
                        <div class="distance-step" data-distance="2">
                            <div class="distance-icon">üì∏</div>
                            <div class="distance-label">Nah</div>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button id="sneakBtn" class="btn btn-action" disabled>
                            <span class="btn-icon">üö∂</span>
                            Schleich an
                        </button>
                        <button id="photoBtn" class="btn btn-action" disabled>
                            <span class="btn-icon">üì∑</span>
                            Foto machen
                        </button>
                        <button id="confirmBtn" class="btn btn-primary" style="display: none;">
                            <span class="btn-icon">‚úÖ</span>
                            Foto best√§tigen
                        </button>
                        <button id="applyBonusBtn" class="btn btn-action" style="display: none;">
                            <span class="btn-icon">‚ú®</span>
                            Bonus anwenden
                        </button>
                        <button id="captureAllBtn" class="btn btn-primary" style="display: none;">
                            <span class="btn-icon">üì∏‚ú®</span>
                            Alle fotografieren
                        </button>
                        <button id="attractBtn" class="btn btn-action" disabled>
                            <span class="btn-icon">ü¶ó</span>
                            Vogel anlocken
                        </button>
                    </div>

                    <div class="dice-area" id="diceArea">
                        <div class="dice" id="dice">?</div>
                    </div>
                </div>

                <div class="player-hand">
                    <h3 class="area-title">Deine Insektenkarten</h3>
                    <div id="insectHand" class="insect-cards-container"></div>
                    <div class="hand-hint">Klicke Karten an, um Boni beim Fotografieren zu nutzen</div>
                </div>

                <div class="player-photos">
                    <div class="photos-header" id="togglePhotos">
                        <h3 class="area-title">Deine Fotos <span id="playerScore" class="score-badge">0 Pkt</span></h3>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div id="capturedBirds" class="captured-birds-container collapsed"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game End Screen -->
    <div id="endScreen" class="screen">
        <div class="end-container">
            <div class="trophy-icon">üèÜ</div>
            <h1 id="winnerText">Spiel beendet!</h1>
            <div id="finalScores" class="final-scores"></div>
            <button id="newGameBtn" class="btn btn-primary btn-large">Neues Spiel</button>
        </div>
    </div>

    <!-- Modal for notifications -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-icon" id="modalIcon"></div>
            <h3 id="modalTitle"></h3>
            <p id="modalMessage"></p>
            <button id="modalClose" class="btn btn-primary">OK</button>
        </div>
    </div>

    <script src="js/HostLogic.js?v=10"></script>
    <script src="js/SocketBridge.js?v=10"></script>
    <script src="js/components.js?v=10"></script>
    <script src="js/game.js?v=10"></script>
</body>

</html>